{% extends "base.html" %}

{% block title %}D√©monstration MathML - Tests de Math√©matiques{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header bg-success text-white">
        <h3 class="mb-0">üßÆ D√©monstration MathML - Guide d'utilisation</h3>
    </div>

    <div class="card-body">
        <div class="alert alert-info">
            <h5>üìö Comment utiliser MathML dans vos √©nonc√©s</h5>
            <p>Utilisez les notations suivantes dans vos √©nonc√©s de questions pour afficher des formules math√©matiques :</p>
        </div>

        <div class="row">
            <div class="col-md-6">
                <h4>üî¢ Fractions</h4>
                <div class="card mb-4">
                    <div class="card-body">
                        <h6>Syntaxe :</h6>
                        <code>[frac:3/4]</code>

                        <h6 class="mt-3">R√©sultat :</h6>
                        <div class="math-content border p-3 bg-light">
                            {{ examples.fraction.output }}
                        </div>

                        <h6 class="mt-3">Exemple d'√©nonc√© :</h6>
                        <div class="alert alert-light math-content">
                            {{ examples.fraction.input|mathml|safe }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <h4>üìê Puissances</h4>
                <div class="card mb-4">
                    <div class="card-body">
                        <h6>Syntaxe :</h6>
                        <code>[pow:x^2]</code>

                        <h6 class="mt-3">R√©sultat :</h6>
                        <div class="math-content border p-3 bg-light">
                            {{ examples.puissance.output }}
                        </div>

                        <h6 class="mt-3">Exemple d'√©nonc√© :</h6>
                        <div class="alert alert-light math-content">
                            {{ examples.puissance.input|mathml|safe }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <h4>‚àö Racines</h4>
                <div class="card mb-4">
                    <div class="card-body">
                        <h6>Racine carr√©e :</h6>
                        <code>[sqrt:16]</code>

                        <h6 class="mt-2">Racine n-i√®me :</h6>
                        <code>[root:8,3]</code> <small>(racine cubique de 8)</small>

                        <h6 class="mt-3">Exemple d'√©nonc√© :</h6>
                        <div class="alert alert-light math-content">
                            {{ examples.racine.input|mathml|safe }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <h4>üìä Variables avec indices</h4>
                <div class="card mb-4">
                    <div class="card-body">
                        <h6>Syntaxe :</h6>
                        <code>[var:x_1]</code> <small>(x avec indice 1)</small><br>
                        <code>[var:y]</code> <small>(variable simple)</small>

                        <h6 class="mt-3">Exemple d'√©nonc√© :</h6>
                        <div class="alert alert-light math-content">
                            {{ examples.variable.input|mathml|safe }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card bg-light mb-4">
            <div class="card-body">
                <h4>üéØ Exemples d'√©nonc√©s complets</h4>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 1 - G√©om√©trie :</h6>
                        <div class="alert alert-warning math-content">
                            {{ "Un rectangle a pour longueur [frac:7/2] cm et pour largeur [frac:3/4] cm. Calculer son aire."|mathml|safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 2 - Alg√®bre :</h6>
                        <div class="alert alert-warning math-content">
                            {{ "R√©soudre l'√©quation [pow:x^2] + 3x = 10. Donner les solutions sous forme de fraction."|mathml|safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 3 - Calcul num√©rique :</h6>
                        <div class="alert alert-warning math-content">
                            {{ "Simplifier l'expression : [sqrt:64] + [root:27,3] - [frac:1/2]"|mathml|safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 4 - Variables :</h6>
                        <div class="alert alert-warning math-content">
                            {{ "Si [var:a_1] = 5, [var:a_2] = 3 et [var:a_3] = [pow:2^3], calculer [var:a_1] + [var:a_2] + [var:a_3]"|mathml|safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 5 - Expression complexe (NOUVELLE SYNTAXE) :</h6>
                        <div class="alert alert-success math-content">
                            {{ "Calculer [math:sqrt(1 + sqrt(x))] pour x = 3"|mathml|safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 6 - Fraction complexe (NOUVELLE SYNTAXE) :</h6>
                        <div class="alert alert-success math-content">
                            {{ "Simplifier [math:frac(a + b, c - d)] avec a=5, b=3, c=8, d=2"|mathml|safe }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <h6>Exemple 7 - Puissance d'une racine (NOUVELLE SYNTAXE) :</h6>
                        <div class="alert alert-success math-content">
                            {{ "D√©velopper [math:pow(sqrt(x + 1), 2)] = x + 1"|mathml|safe }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card bg-info mb-4">
            <div class="card-body">
                <h4>üöÄ Nouvelle Syntaxe Avanc√©e [math:...]</h4>

                <p><strong>Utilisez la nouvelle syntaxe [math:...] pour des expressions complexes :</strong></p>

                <div class="row">
                    <div class="col-md-6">
                        <h6>üìê Racines imbriqu√©es :</h6>
                        <div style="background: white; padding: 10px; border-radius: 4px; margin: 5px 0;">
                            <code>[math:sqrt(1 + sqrt(x))]</code><br>
                            <small>‚Üí ‚àö(1 + ‚àöx)</small>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <h6>üìä Fractions complexes :</h6>
                        <div style="background: white; padding: 10px; border-radius: 4px; margin: 5px 0;">
                            <code>[math:frac(a + b, c - d)]</code><br>
                            <small>‚Üí (a + b)/(c - d)</small>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <h6>‚ö° Puissances complexes :</h6>
                        <div style="background: white; padding: 10px; border-radius: 4px; margin: 5px 0;">
                            <code>[math:pow(sqrt(x), 2)]</code><br>
                            <small>‚Üí (‚àöx)¬≤</small>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <h6>üî¢ Expressions avec op√©rateurs :</h6>
                        <div style="background: white; padding: 10px; border-radius: 4px; margin: 5px 0;">
                            <code>[math:sqrt(x + y * z)]</code><br>
                            <small>‚Üí ‚àö(x + y √ó z)</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card border-success">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">‚úÖ Avantages de MathML pour votre plateforme</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>üé® Rendu professionnel</h6>
                        <p>Les formules s'affichent avec la qualit√© typographique des manuels scolaires.</p>
                    </div>
                    <div class="col-md-4">
                        <h6>‚ôø Accessibilit√©</h6>
                        <p>MathML est lu par les lecteurs d'√©cran, rendant vos tests accessibles aux malvoyants.</p>
                    </div>
                    <div class="col-md-4">
                        <h6>üì± Compatible</h6>
                        <p>Fonctionne sur tous les navigateurs modernes avec fallback automatique via MathJax.</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <h6>üîç SEO optimis√©</h6>
                        <p>Le contenu math√©matique reste indexable par les moteurs de recherche.</p>
                    </div>
                    <div class="col-md-4">
                        <h6>‚ö° Performant</h6>
                        <p>Rendu natif quand support√©, sinon fallback intelligent avec MathJax.</p>
                    </div>
                    <div class="col-md-4">
                        <h6>‚úèÔ∏è Facile √† utiliser</h6>
                        <p>Syntaxe simple et intuitive pour cr√©er des formules complexes.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg">
                ‚Üê Retour √† l'accueil
            </a>
            {% if session.get('qcm_admin_access') or session.get('admin_access') %}
            <a href="{{ url_for('admin') }}" class="btn btn-success btn-lg ms-3">
                Administration QCM ‚Üí
            </a>
            {% endif %}
        </div>
    </div>
</div>

<script>
// V√©rifier le support MathML et afficher un message si n√©cessaire
document.addEventListener('DOMContentLoaded', function() {
    if (!window.mathMLSupported) {
        const alert = document.createElement('div');
        alert.className = 'alert alert-info mt-3';
        alert.innerHTML = '<strong>‚ÑπÔ∏è Info :</strong> Votre navigateur utilise MathJax pour afficher les formules math√©matiques.';
        document.querySelector('.card-body').appendChild(alert);
    } else {
        const alert = document.createElement('div');
        alert.className = 'alert alert-success mt-3';
        alert.innerHTML = '<strong>‚úÖ Excellent :</strong> Votre navigateur supporte MathML nativement !';
        document.querySelector('.card-body').appendChild(alert);
    }
});
</script>
{% endblock %}
